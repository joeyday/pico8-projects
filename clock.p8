pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
-- main
function _init()
	cls(13)
	
	facecol=7
	dialcol=0

	dx = {}
	add(dx, cos(0.1666))
	add(dx, cos(0.0833))
	add(dx, 1)
	add(dx, dx[2])
	add(dx, dx[1])
	add(dx, 0)
	add(dx, -dx[1])
	add(dx, -dx[2])
	add(dx, -1)
	add(dx, -dx[2])
	add(dx, -dx[1])
	add(dx, 0)
	
	dy = {}
	add(dy, sin(0.1666))
	add(dy, sin(0.0833))
	add(dy, 0)
	add(dy, -dy[2])
	add(dy, -dy[1])
	add(dy, 1)
	add(dy, -dy[1])
	add(dy, -dy[2])
	add(dy, 0)
	add(dy, dy[2])
	add(dy, dy[1])
	add(dy, -1)

	d=29
	
	-- draw shadow
	fillp(â–’)
	circfill(68, 68, d*1.76, 1)
	for row=-1,1,2 do
		for col=-1,1,2 do
		 local x = 68+row*d
		 local y = 68+col*d
		 circfill(x, y, d/2+1, 1)
		 -- print(x..' '..y, 9)
		end
	end

	fillp()
	
	-- draw clock
	circfill(64, 64, d*1.76, facecol)
	for row=-1,1,2 do
		for col=-1,1,2 do
		 local x = 64+row*d
		 local y = 64+col*d
		 circfill(x, y, d/2+1, facecol)
		 -- print(x..' '..y, 9)
		end
	end

	-- draw dials
	for row=-1,1 do
		for col=-1,1 do
		 local x = 64+row*d
		 local y = 64+col*d
			circfill(x, y, d/2-2, dialcol)
			-- print(x..' '..y, 9)
		end
	end
	
	-- draw 12 o'clock
	-- pset(64, 51, 8)
	-- line(63, 50, 65, 50, 8)
	
	for row=-1,1 do
 	for col=-1,1 do
		 circfill(64+row*d, 64+col*d, 12, dialcol)
			drawhand(ceil(rnd(12)),64+row*d,64+col*d)
		end
	end

	
	f=0.1
end

function _update()
	t=ceil(f)
	f+=0.1
	if f > 12 then
		f=0.1
	end
end

function _draw()
 for r=0,1 do
 	for c=-1,0 do
		 circfill(64+r*d, 64+c*d, 12, dialcol)
			drawhand(t,64+r*d,64+c*d)
		end
	end
end

function drawhand(t,x,y)
	local sx=8
	local flip_x=false
	local flip_y=false
	if t==1 or t==5 or t==7 or t==11 then
		sx=32
	elseif t==2 or t==4 or t==8 or t==10 then
		sx=56
	elseif t==3 or t==9 then
		sx=80
	end
	
	if t>=7 and t<=11 then
		flip_x=true
	end

	if t>=4 and t<=8 then
		flip_y=true
	end
	
	sspr(sx,0,21,21,x-10,y-10,21,21,flip_x,flip_y)	
end
__gfx__
00000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000575000000000000000000000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000676000000000000000000000000077000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700000000000000777000000000000000000000000776000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000005777500000000000000000000007775000000000000000000000005677000000000000000000000000000000000000000000000000000000
00000000000000006777600000000000000000000067770000000000000000000005677770000000000000000000000000000000000000000000000000000000
00000000000000000575000000000000000000000007760000000000000000000000777700000000000000000000065000000000000000000000000000000000
00000000000000000575000000000000000000000576050000000000000000000576777000000000000000000575577765000000000000000000000000000000
00000000000000000707000000000000000000000707000000000000000000000707060000000000000000000707777777765000000000000000000000000000
00000000000000000575000000000000000000000575000000000000000000000575000000000000000000000575577765000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000065000000000000000000000000000000000
